/*
60. Escreva uma função que retorne a primeira posição de uma sub-string
    dentro de uma string. Caso não seja encontrada, retorne -1.
*/

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// -----------------------------------------------------------------------------
// Função que retorna a posição inicial da sub-string dentro da string principal
// Usa apenas strings (vetores de char) e índices
// -----------------------------------------------------------------------------
int encontraSubstring(char str[], char sub[])
{
    int i, j;                          // Índices para percorrer as strings
    int tamStr = strlen(str);          // Tamanho da string principal
    int tamSub = strlen(sub);          // Tamanho da sub-string

    // Percorre a string principal
    for (i = 0; i <= tamStr - tamSub; i++)
    {
        // Para cada posição i, tenta comparar a sub-string
        for (j = 0; j < tamSub; j++)
        {
            // Se algum caractere for diferente, para a comparação
            if (str[i + j] != sub[j]) // i + j anda na string principal, enquanto j anda na sub-string
            {
                break;
            }
        }

        // Se j chegou ao tamanho da sub-string, encontrou
        if (j == tamSub)
        {
            return i;   // Retorna a posição inicial da sub-string
        }
    }

    return -1;  // Sub-string não encontrada
}

// -----------------------------------------------------------------------------
// Função principal
// -----------------------------------------------------------------------------
int main()
{
    char texto[100];     // String principal
    char busca[50];      // Sub-string a ser procurada
    int posicao;

    printf("Digite a string principal: ");
    fgets(texto, sizeof(texto), stdin);
    texto[strcspn(texto, "\n")] = '\0';   // Remove o '\n'

    printf("Digite a sub-string a ser procurada: ");
    fgets(busca, sizeof(busca), stdin);
    busca[strcspn(busca, "\n")] = '\0';   // Remove o '\n'

    posicao = encontraSubstring(texto, busca);

    if (posicao != -1)
        printf("A sub-string foi encontrada na posicao %d.\n", posicao);
    else
        printf("A sub-string nao foi encontrada.\n");

    system("pause");
    return 0;
}
