/*
60. Escreva uma função que retorne a primeira posição de uma sub-string dentro de uma string.
    Caso a sub-string não seja encontrada, a função deve retornar -1.

    pStr  // ponteiro que percorre a string principal
    str   // ponteiro para o início da string principal
    Ambos apontam para o MESMO array de caracteres (a string principal)

     0 1 2 3 4 5 6 7 8 9 10
     p r o g r a m a c a o

     str  → índice 0
     pStr → índice 3

     pStr - str = 3

     posição correta


*/

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// -----------------------------------------------------------------------------
// Função que retorna a primeira posição de uma sub-string dentro de outra string
// (implementada com ponteiros)
// -----------------------------------------------------------------------------
int encontraSubstring(char *str, char *sub) // *str e *sub são caracteres
{
    char *pStr;     // Ponteiro para percorrer a string principal
    char *pSub;     // Ponteiro para percorrer a sub-string
    char *inicio;   // Marca o início da possível correspondência

    // Percorre a string principal
    for (pStr = str; *pStr != '\0'; pStr++) // Percorra a string str enquanto o caractere apontado por pStr não for '\0'
    {
        inicio = pStr;   // A partir daqui, vou tentar comparar a sub-string
        pSub = sub;      // Comece a comparação pelo primeiro caractere da sub-string

        // Compara caractere a caractere
        while (*inicio == *pSub && *pSub != '\0')   // Enquanto o caractere atual da string principal for igual ao caractere atual da sub-string,
                                                    // e enquanto a sub-string ainda não terminou
        {
            inicio++; // Avance para o próximo caractere da string principal
            pSub++;   // Avance para o próximo caractere da sub-string
        }

        // Se chegou ao fim da sub-string, encontrou
        if (*pSub == '\0')
        {
            return pStr - str; // Retorna a posição (diferença de ponteiros)
        }
    }

    return -1; // Não encontrou
}

// -----------------------------------------------------------------------------
// Função principal (main)
// -----------------------------------------------------------------------------
int main()
{
    char texto[100];
    char busca[50];
    int posicao;

    printf("Digite a string principal: ");
    fgets(texto, sizeof(texto), stdin);
    texto[strcspn(texto, "\n")] = '\0';

    printf("Digite a sub-string a ser procurada: ");
    fgets(busca, sizeof(busca), stdin);
    busca[strcspn(busca, "\n")] = '\0';

    posicao = encontraSubstring(texto, busca);

    if (posicao != -1)
        printf("A sub-string foi encontrada na posicao %d.\n", posicao);
    else
        printf("A sub-string nao foi encontrada.\n");

    system("pause");
    return 0;
}
