/*
    28. Faça uma função que receba como parâmetro o valor de um ângulo em graus e calcule
        o valor do cosseno desse ângulo usando a série de Taylor:
        cos(x) = Σ_{n=0}^{∞} [(-1)^n / (2n)!] · x^(2n) = 1 - (x^2)/(2!) + (x^4)/(4!) - ... para todo x,
        , onde x é o ângulo em radianos. Considerar π = 3.141593 e n variando de 0 até 5.
*/

#include <stdio.h>   // Biblioteca padrão para entrada e saída
#include <stdlib.h>
#include <math.h>    // Biblioteca para pow() e funções matemáticas

#define PI 3.141593

// --------------------------- Função para calcular fatorial ---------------------------
long long fatorial(int n)                 // Define função que calcula o fatorial de n
{                                         // Início da função
    long long fat = 1;                    // Inicializa o resultado como 1 (neutro da multiplicação)
    for (int i = 1; i <= n; i++)          // Loop de 1 até n
    {                                     // Início do laço
        fat *= i;                         // Multiplica acumulador pelo valor atual // fat = fat * i
    }                                     // Fim do laço
    return fat;                           // Retorna o valor final do fatorial
}                                         // Fim da função fatorial

// --------------------------- Função para calcular cosseno (série de Taylor) ---------------------------
double cosseno_taylor(double graus)       // Função que recebe ângulo em graus
{                                         // Início da função
    double x = graus * (PI / 180.0);      // Converte o ângulo para radianos

    double cosx = 0;                      // Variável que acumulará o resultado da série

    for (int n = 0; n <= 5; n++)          // Laço de 0 até 5 (6 termos da série)
    {                                     // Início do laço
        double termo = pow(-1, n) * pow(x, 2 * n) / fatorial(2 * n);
                                           // Calcula termo da série: (-1)^n * x^(2n) / (2n)!
        cosx += termo;                    // Soma o termo à variável acumuladora
    }                                     // Fim do laço

    return cosx;                          // Retorna o valor aproximado do cosseno
}                                         // Fim da função cosseno_taylor

// --------------------------- Função principal ---------------------------
int main()                                // Início da função principal
{                                         // Início do bloco principal
    double angulo;                        // Declara variável para armazenar o ângulo
    double resultado;                     // Variável para armazenar o cosseno calculado

    printf("Digite o angulo em graus: "); // Solicita o ângulo ao usuário
    scanf("%lf", &angulo);                // Lê o valor digitado

    resultado = cosseno_taylor(angulo);   // Chama a função que calcula o cosseno

    printf("Cosseno aproximado de %.2lf graus = %.6lf\n", angulo, resultado);
                                           // Exibe o resultado com 6 casas decimais

    system("pause");
    return 0;                             // Finaliza o programa corretamente
}                                         // Fim da função principal
